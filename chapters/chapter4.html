<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>chapter 4</title>
    <link rel="stylesheet" href="../chaptercss/chapter4.css">
    <link rel="apple-touch-icon" sizes="180x180" href="/favicon/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="theme-color" content="#ffffff">
</head>
<body>
    <div class="bodddy4">
    <h1>Chapter 4</h1>
    <h2>Summary of Findings</h2>
    <p>The study aimed to design and implement a reference frequency identification (RFID), keypad lock, and short message service (SMS) security system using an Arduino-based with alert system. The performance of the system was evaluated through experimental testing of its different components, including RFID scanning efficiency, OTP generation, alarm triggering, LED indication, buzzer activation, SMS delivery, and bypass testing. </p>
    <p>The following are the major findings of the study:</p>
    <p>1.The RFID scanning efficiency of the system was found to be high</p>
    <p>2.The OTP generation was found to be efficient, and the system was capable of generating a unique OTP for each access attempt.</p>
    <p>3.The alarm triggering and LED indication system were found to be effective in alerting the user of an unauthorized access attempt.</p>
    <p>4.The buzzer activation system was found to be effective in producing an audible alarm.</p>
    <p>5.The SMS delivery system was found to be efficient in sending alerts to the registered phone numbers in case of an unauthorized access attempt.</p>
    <p>Overall, the study showed that the proposed system is an effective means of securing various applications, including homes, offices, and laboratories. The system achieved high accuracy and efficiency in authenticating users and detecting unauthorized access attempts. The proposed system provides a comprehensive and efficient solution to the problem of unauthorized access attempts. The findings of this study contribute to the field of access control and security systems, providing a valuable solution to the problem of unauthorized access.</p>
    <h2>Conclusions</h2>
    <p>We decided to develop this kind of design project to show to others how can we improve our security on our properties and protect it while you’re keeping track on what happening on your security. That we can have alert or notification while being away on your properties. Not everyone can use it because its bit costly compare to normal doorknob or other padlock. Many will be interested to this idea and design project because it will help to minimize and decrease the rate of burglary. Using this design project will help everyone relax and spent their time not thinking what could happen on their properties without there knowing.</p>
    <p>It is not only applicable in the Philippines but also around the world. A lot of people having a problem on burglary cases. It will help people who always not on their home all the time and properties that need a good security and alert system. So our group decided to have "Design and Implementation of Reference Frequency Identification (RFID), Keypad Lock, and Short Message Service (SMS) Security: an Arduino-Based with Alert System" as our design project.</p>
    <h2>Recommendations</h2>
    <p>1.Increase security measures: Based on the results of the study, it may be recommended that the system's security measures be improved. For example, additional encryption or authentication protocols could be implemented to prevent unauthorized access.</p>
    <p>2.Improve user interface: If the study found that users had difficulty using the system, it may be recommended that the user interface be improved. This could involve simplifying the interface, providing more user-friendly instructions, or improving the design of the hardware.</p>
    <p>3.Expand functionality: If the study found that the system was effective but lacked certain features, it may be recommended that the system be expanded to include additional functionality. For example, additional sensors could be added to the system to provide more detailed information.</p>
    <p>4.Conduct further testing: If the study was limited in scope or time, it may be recommended that further testing be conducted to validate the results. This could involve conducting additional experiments, testing the system in different environments, or soliciting feedback from a larger sample of users.</p>
    <p>5.Implement the system in real-world scenarios: If the study found that the system was effective, it may be recommended that the system be implemented in real-world scenarios. This could involve collaborating with a company or organization to deploy the system and gather data on its effectiveness in a real-world context.</p>
    <h2>APPENDIX</h2>
<div class="apend">
    <div class="cont">
         <div class="labal1">APPENDIX A</div>
        <div class="content"><h3>References</h3>
            <h3>Journal and Articles</h3>
            <p>Amsler S., (2021), “RFID (radio frequency identification).”</p>
            <p>Budget Direct, (2022), “Home Burglary Rates Around the World.”</p>
            <p>Clickatell, (2022), “5 potent ways to use mobile SMS for security.”</p>
            <p>Hlaing N. & Lwin S., (2019), “Volume 3: Electronic Door Lock using RFID and Password Based on Arduino.”</p>
            <p>Komol M., Podder A., & Ali N., (2018), “RFID and Finger Print Based Dual Security System: A Robust Secured Control to Access Through Door Lock Operation.”</p>
            <p>Mince-Didier A., (2022), “Home Invasions.”</p>
            <p>Ombay G., (2022), “Philippine crime incidents in last 8 months down by 8%, PNP says.”</p>
            <p>PSR Physical Security, (2022), “Alarm Systems.”</p>
            <p>Shyamsundar T., (2020), “What Is SMS Authentication and Is It Secure?</p>
            <p>Strauss C., (2019), “The Advantages of Usinga  Keypad Lock System.”</p>
            <p>TT Elctronics, (2020), “RFID: The Technology Making Industries Smarter.”</p>
            <h3>Online Resources</h3>
            <a href="https://exoft.net/system-development-life-cycle ">https://exoft.net/system-development-life-cycle </a><br>
            <a href="https://www.mtu.edu/it/security/policies-procedures-guidelines/information">https://www.mtu.edu/it/security/policies-procedures-guidelines/information-security-program/system-development-lifecycle </a><br>
            <a href="https://store.Arduino.cc/products/Arduino-mega-2560-rev3">https://store.Arduino.cc/products/Arduino-mega-2560-rev3</a><br>
            <a href="https://www.winstar.com.tw/products/character-lcd-display-module/16x2-lcd.html">https://www.winstar.com.tw/products/character-lcd-display-module/16x2-lcd.html</a><br>
            <a href="https://www.cestore-mm.com/product/mfrc-522-rfid-reader-module/">https://www.cestore-mm.com/product/mfrc-522-rfid-reader-module/</a><br>
            <a href="https://robu.in/product/13-56mhz-rfid-ic-key-tag/SIM800L 5V Volume 2 Wireless GSM GPRS Quad Band Module In Pakistan (hallroad.org)">https://robu.in/product/13-56mhz-rfid-ic-key-tag/SIM800L 5V Volume 2 Wireless GSM GPRS Quad Band Module In Pakistan (hallroad.org)</a><br>
            <a href="https://data.energizer.com/pdfs/e91.pdf">https://data.energizer.com/pdfs/e91.pdf</a><br>
            <a href="https://circuit.rocks/battery-holder-4xaa-to-barrel-jack-connector.html">https://circuit.rocks/battery-holder-4xaa-to-barrel-jack-connector.html</a><br>
            <a href="https://www.waveshare.com/sg90-servo.htm">https://www.waveshare.com/sg90-servo.htm</a><br>
            <a href="https://makersportal.com/blog/2020/3/14/Arduino-servo-motor-control">https://makersportal.com/blog/2020/3/14/Arduino-servo-motor-control</a><br>
            <a href="https://robu.in/product/220-ohm-resistor-0-5w-metal-film-pack-of-50">https://robu.in/product/220-ohm-resistor-0-5w-metal-film-pack-of-50</a><br>
            <a href="https://www.makerlab-electronics.com/product/4216-piezoelectric-buzzer">https://www.makerlab-electronics.com/product/4216-piezoelectric-buzzer</a><br>
            <a href="https://www.sparkfun.com/products/9590">https://www.sparkfun.com/products/9590</a><br>
            <a href="https://www.makerlab-electronics.com/product/9448">https://www.makerlab-electronics.com/product/9448</a><br>
            <a href="https://www.makerlab-electronics.com/product/3-pin-female-to-female-dupont-jumper-wire-pack-of-5">https://www.makerlab-electronics.com/product/3-pin-female-to-female-dupont-jumper-wire-pack-of-5</a><br>
            <a href="https://docs.Arduino.cc/software/ide-v1/tutorials/Arduino-ide-v1-basics">https://docs.Arduino.cc/software/ide-v1/tutorials/Arduino-ide-v1-basics</a>
        </div>
    </div>
    <div class="cont">
        <div class="labal1">APPENDIX B</div>
       <div class="content"><h3>User’s Manual of Design Prototype</h3>
        <h4>Outside</h4>
        <p>Step 1: Turn on the power source</p>
        <img src="/picture/appendpic1.png">
        <img src="/picture/appendpic2.png" >
        <p>Step 2: Scan RFID card/tag</p>
        <img src="/picture/appendpic3.png" >
        <p>Step 3: The designated phone number will receive the OTP</p>
        <img src="/picture/appendpic4.png" >
        <p>Step 4: You may now enter the OTP using the keypad </p>
        <img src="/picture/appendpic5.png" >
        <p>Step 5: LED lights will turn to green or red (green means you have successfully opened the door and red means you make invalid OTP or RFID tags)</p>
        <p>Step 6: Successfully unlock the door</p>
        <img src="/picture/appendpic6.png" >
        <h4>Inside</h4>
        <p>Step 1: Click the designated button</p>
        <img src="/picture/appendpic7.png" >
        <p>Step 2: Successfully unlock the door</p>
        <img src="/picture/appendpic8.png" >
        <p>Step 3:  Click the “C” in the keypad</p>
        <img src="/picture/appendpic9.png" >
    </div>
   </div>
   <div class="cont">
    <div class="labal1">APPENDIX C</div>
   <div class="content"><h3>System Architecture</h3>
    <img src="/picture/appendpic10.png" >
    <h3>System Source Code</h3>
    <p>#include <Servo.h>
        #include <LiquidCrystal_I2C.h>
        #include <Keypad.h>
        #include <SPI.h>
        #include <MFRC522.h>
        #include <Timer.h>
        
        Timer timer;
        
        #define SS_PIN 53
        #define RST_PIN 49
        const int servoPin = 47; 
        
        Servo Servo1;
        
        const int redLED = 43;
        const int greenLED = 41;
        const int button = 39;
        
        MFRC522 mfrc522(SS_PIN, RST_PIN); // Instance of the class
        
        LiquidCrystal_I2C lcd(0x27,16,2);
        
        
        const int KEYPAD_ROW_NUM = 4; //four rows
        const int KEYPAD_COLUMN_NUM = 4; //three columns
        
        char keys[KEYPAD_ROW_NUM][KEYPAD_COLUMN_NUM] = {
          {'1','2','3', 'A'},
          {'4','5','6', 'B'},
          {'7','8','9', 'C'},
          {'*','0','#', 'D'}
        };
        
        byte pin_rows[KEYPAD_ROW_NUM] = {9, 8, 7, 6}; //connect to the row pinouts of the keypad
        byte pin_column[KEYPAD_COLUMN_NUM] = {5, 4, 3, 2}; //connect to the column pinouts of the keypad
        
        Keypad keypad = Keypad( makeKeymap(keys), pin_rows, pin_column, KEYPAD_ROW_NUM, KEYPAD_COLUMN_NUM );
        
        String inputOTP = "";
        String currentRFID = "";
        bool RFIDisSet = false;
        bool doorUnlocked = false;
        bool smsSent = false;
        int attempt = 0;
        int otpAttempt = 0;
        bool isBackupMode = false;
        
        String generatedOTP = "zzzzzz";
        int validRFIDIndex = -1;
        bool alertSent = false;
        
        const int numberOfSavedRFID = 4;
        const char* savedRFID[numberOfSavedRFID] = {" 83 ef 39 9f", " e3 72 b6 0d", " 93 17 c9 05", " b3 33 0d 13"};
        const char* savedContactNumber[numberOfSavedRFID] = {"+639983705946","09619320902","09215003091","09654339113"};
        
        const int numberOfBackupCodes = 6;
        
        const char* backupCodes[numberOfBackupCodes] = {"382935259608","259608738581","738581024581","024581384382","384382024581","125593384382"};
        
        
        void setup(){
        
          pinMode(redLED, OUTPUT);
          pinMode(greenLED, OUTPUT);
          pinMode(button, INPUT_PULLUP);
          
          Serial.begin(9600);     
        
          // lcd
          lcd.init();
          lcd.backlight();
          lcd.setCursor(0,0);
          lcd.print("Welcome!");
        
          // Sim
          lcd.setCursor(0,1);
          lcd.print("GSM Loading...  ");
          Serial1.begin(9600);
          delay(1000);
          Serial1.println("AT");    //Sets the GSM Module in Text Mode
          delay(1000);
          Serial1.println("AT+CMGF=1");    //Sets the GSM Module in Text Mode
          delay(1000);
        
          
          // Servo
          lcd.setCursor(0,1);
          lcd.print("Servo Loading...");
          Servo1.attach(servoPin);
          Servo1.write(0); 
          delay(500); 
         
          
          //rfid
          lcd.setCursor(0,1);
          lcd.print("RFID Loading....");
          SPI.begin();
          mfrc522.PCD_Init();
        
          //lcd  
          
          delay(2000);
          lcd.clear();
        
          timer.start();
          timer.pause();
        }
        
        // String number = "+639983705946";
        int buttonState;
        bool RFIDISSAVED = false;
        long startTime = 0;
        void loop(){
          buttonState = (digitalRead(button));
          //Serial.println(buttonState);
          if(buttonState == HIGH){
              if(!doorUnlocked) unlockDoor();      
              else lockDoor();  
              delay(500);    
          }
          if(!doorUnlocked){
            listenKeyEvents(); 
            if(isBackupMode){
              timer.resume();
              setScreenDisplay("Enter Backup:      ",hidePassword(inputOTP));
              if(isOTPCorrect()) {
                unlockDoor();
                setScreenDisplay("Door Unlocked!  ","                ");
                  
              }
              if(timer.read() >= startTime+10000){
                reset();                      
              }
            } else if(!RFIDisSet){
              //Serial.println(otpAttempt);
              setScreenDisplay("Scan your RFID  ","                ");
              readRFID();
              RFIDISSAVED = isRFIDValid();
              if(otpAttempt > 2 && !RFIDISSAVED){
                setScreenDisplay("Maximum Attempt ","Limit Reached   ");
                //redAlert(); 
                digitalWrite(redLED,HIGH);
                tone(45,794,5000); // 600000 
                sendAlertSMS("Someone attempted to open the door");
                                   
                delay(5000); // 3600000
                lcd.clear();
                digitalWrite(redLED,LOW);
                otpAttempt = 0; 
                reset();
              }
              timer.pause();
              
            } else {
              if(RFIDISSAVED){
                timer.resume();
        
                if(!smsSent) {
                  greenAlert();
                  setScreenDisplay("Sending OTP     ","                ");
                }                  
                sendOTP();
                setScreenDisplay("Enter OTP:      ",inputOTP);
                   
                if (Serial1.available() > 0) Serial.write(Serial1.read());
                //listenKeyEvents();
        
                if(attempt > 2) {
                  setScreenDisplay("Maximum Attempt ","Limit Reached   ");
                  //redAlert(); 
                  digitalWrite(redLED,HIGH);
                  tone(45,794,5000); // 600000 
                  sendAlertSMS("Someone attempted to open the door");
                                     
                  delay(5000); // 3600000
                  lcd.clear();
                  digitalWrite(redLED,LOW);
                  attempt = 0; 
                  reset();                                      
                }
        
                if(isOTPCorrect()) {
        
                  unlockDoor();
                  setScreenDisplay("Door Unlocked!  ","                ");
                   
                }
        
                if(timer.read() >= startTime+30000){
                  reset();                      
                }
                
              } else {
                
                redAlert();
                sendAlertSMS("Someone attempted to open the door");
                reset();
              }
              
            }    
          } else {
            digitalWrite(greenLED,HIGH);
            if(!alertSent) {
              sendAlertSMS("Someone successfully opened the door");
              alertSent = true;
            }
            setScreenDisplay("Door Unlocked!  ","                ");
            listenKeyEvents();    
          } 
        }
        
        
        
        String hidePassword(String pwdStr){
          String hiddenPwd = "";
          for(int i = 0; i < pwdStr.length(); i++){
            hiddenPwd += "*";
          }
          return hiddenPwd;
        }
        void redAlert(){
          digitalWrite(redLED,HIGH);
          setScreenDisplay("Invalid RFID!   ","                ");
          tone(45,794,250);
          delay(1000);
          digitalWrite(redLED,LOW);
          noTone(45);        
        }
        void greenAlert(){
          digitalWrite(greenLED,HIGH);
          tone(45,1024,250);
          delay(500);
          digitalWrite(greenLED,LOW);
          noTone(45);    
        }
        bool isRFIDValid() {
          for(int i = 0; i < numberOfSavedRFID; i++) {
            if(String(savedRFID[i]) == currentRFID) {
              validRFIDIndex = i;   
              otpAttempt = 0;                           
              return true;
            }
          }
          return false;
        }
        void unlockDoor(){
          Servo1.write(120);       
          doorUnlocked = true;
        }
        void lockDoor() {
          reset();
        }
        void setScreenDisplay(String l1, String l2) {
          lcd.setCursor(0,0);
          lcd.print(l1);
          lcd.setCursor(0,1);
          lcd.print(l2);
        }
        void clearInput(){
          inputOTP = "";
          lcd.clear();
        }
        bool isOTPCorrect() { 
          for(int j = 0; j < numberOfBackupCodes; j++) {
            if(String(backupCodes[j]) == inputOTP) {                       
              return true;
            }
          }   
          return generatedOTP == inputOTP;
        }
        void reset(){
          startTime = 0;
          inputOTP = "";
          currentRFID = "";
          RFIDisSet = false;
          smsSent = false;
          generatedOTP = "zzzzzz";  
          validRFIDIndex = -1;
          doorUnlocked = false;
          alertSent = false;
          isBackupMode = false;
          Servo1.write(0); 
          digitalWrite(greenLED,LOW);
        }
        void listenKeyEvents() {
          char key = keypad.getKey();
          if (key){
            if(key == 'D'){
              clearInput();
            } else if(key == 'B'){
              isBackupMode = true;      
            } else if (key == 'C'){
              reset();
            }  else {
              inputOTP += key;
              if(!isBackupMode && inputOTP.length() > 6) {
                attempt++;
                clearInput();
              }                  
            }
            startTime = timer.read();    
          }  
        }
        void sendOTP() {
          if(!smsSent){
            //Generate Here
            String generatedNumber = String(random(111111,999999));
        
        
            // Send SMS HERE
            Serial.println ("Sending Message");
            //Serial.println ("Set SMS Number");
            Serial1.println("AT+CMGS=\""+String(savedContactNumber[validRFIDIndex])+"\""); //Mobile phone number to send message
            delay(500);
            Serial1.print("Your OTP is "+generatedNumber);
            delay(500);
            Serial1.write(26);// ASCII code of CTRL+Z
            delay(1000);
            // _buffer = _readSerial();
            if (Serial1.available() > 0)
            Serial.write(Serial1.read());
            Serial.println ("Sent Message");    
            Serial.println(generatedNumber);
          
        
            // Set OTP Variable
            generatedOTP = generatedNumber;
        
            smsSent = true;
          }
          
        }
        void readRFID() {
           if(mfrc522.PICC_IsNewCardPresent()){
            Serial.println("Read");
            
            if(mfrc522.PICC_ReadCardSerial()){
              // Serial.println("UID:");
              
              String detected_id = "";
              for(byte i = 0; i < mfrc522.uid.size; i++){
                detected_id += String(mfrc522.uid.uidByte[i] < 0x10 ? " 0" : " ");
                detected_id += String(mfrc522.uid.uidByte[i], HEX);
              }
              currentRFID = detected_id;
              // Serial.println(currentRFID);
              RFIDisSet = true;
              otpAttempt += 1;
              mfrc522.PICC_HaltA();
              startTime = timer.read();      
            } else {
              if(!RFIDisSet) currentRFID = "                ";            
            }
            
          } else {
            if(!RFIDisSet) currentRFID = "                ";  
          }
        }
        
        void sendAlertSMS(String message){
            //Serial.println ("Set SMS Number");
            Serial1.println("AT+CMGS=\""+String(savedContactNumber[3])+"\""); //Mobile phone number to send message
            delay(500);
            Serial1.print(message);
            delay(500);
            Serial1.write(26);// ASCII code of CTRL+Z
            delay(1000);
            // _buffer = _readSerial();
            if (Serial1.available() > 0)
            Serial.write(Serial1.read());
        }</p>

   </div>
   
</div>
<div class="cont">
    <div class="labal1">APPENDIX D</div>
   <div class="content"><h3>Resource Person/s</h3>
       <P>Mr. Jimmy D.V. Roldan<br>
        Program Head, CpE/CS/IT<br>
        Colegio de San Gabriel Arcangel<br>
        0922-8628826</P><br><br>
        <P>Engr. Mark S. Guerrero<br>
            Instructor<br>
            Colegio de San Gabriel Arcangel
        </P>
       
   </div>
</div>
</div>

</div>

<script>
    const apend = document.getElementsByClassName
    ('cont');

    for (i = 0; i<apend.length; i++ ){
        apend[i].addEventListener('click',function()
        {
            this.classList.toggle('active')
    })
    }
</script>

</body>
<div class="btm"><button><a href="/index.html">back</a></button></div>
</html>